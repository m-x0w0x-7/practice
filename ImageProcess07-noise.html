<!DOCTYPE html>
<html lang="en" xmlns="http;//www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Image Processing</title>
</head>
<body onload="init()">
  <canvas id="field" width="250" height="250"></canvas>
  <img src="img/star.jpg" alt="" id="picture" style="display:none;">
  <!-- <input type="range" id="brightness" min="0" max="200" onchange="processImage(); paint();"> -->
  
  <script>
    var ctx, src, img;

    function init() {
      var canvas = document.getElementById( 'field' );
      ctx = canvas.getContext( '2d' );

      var pic = document.getElementById( 'picture' );
      ctx.drawImage( pic, 0, 0, 250, 250 );

      src = ctx.getImageData( 0, 0, 250, 250 );
      img = ctx.createImageData( 250, 250 );

      processImage();
      paint();
    }

    function processImage() {
      for ( var i = 0; i < 250 * 250 * 4; i += 4 ) {
        var v = Math.random() * 50 + 100;
        var r = Math.floor( src.data[i + 0] * v / 100 );
        var g = Math.floor( src.data[i + 1] * v / 100 );
        var b = Math.floor( src.data[i + 2] * v / 100 );

        img.data[i + 0] = Math.min( 255, r ); // R
        img.data[i + 1] = Math.min( 255, g ); // G
        img.data[i + 2] = Math.min( 255, b ); // B
        img.data[i + 3] = 0xff;
      }
    }

    function paint() {
      ctx.putImageData( img, 0, 0 );
    }
  </script>
</body>
</html>